<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-signin-scope" content="profile email">
    <meta name="google-signin-client_id"
        content="299396619158-vsheupgsisdgqs8uda2sibu2l8vnerem.apps.googleusercontent.com">

    <!-- CSS -->
    <link rel="stylesheet" href="./css/cadastrar.style.css">
    <link rel="shortcut icon" href="./assets/img/shortcut-icon.png" type="image/x-icon">

    <!-- Scripts -->
    <script src="./js/sessionTools.script.js"></script>
    <script src="https://kit.fontawesome.com/eb311d3d23.js" crossorigin="anonymous"></script>
    <!-- <script src="https://accounts.google.com/gsi/client" async></script>
    <script src="https://unpkg.com/jwt-decode@3.1.2/build/jwt-decode.js"></script> -->

    <title> COLOSSIHUB | Cadastrar </title>
    <link rel="icon" href="./assets/icon/favicon2.ico">
</head>

<body>
    <header>
        <div class="header__container">
            <span onclick="location.reload();" class="header__boxLogo">
                <img src="./assets/img/logo-light-colossihub.png" alt="img_logo">
            </span>
            <nav class="header__nav">
                <ul class="header__ulLinks ul--header">
                    <li>
                        <a class="header__linkPage" href="./index.html">
                            Forums
                        </a>
                    </li>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="header__point">
                        <path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path>
                    </svg>
                    <li>
                        <a class="header__linkPage" href="./ultimasInteracoes.html">
                            Últimas interações
                        </a>
                    </li>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="header__point">
                        <path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"></path>
                    </svg>
                    <li>
                        <a class="header__linkPage" href="./sobreColossiHub.html">
                            Sobre "ColossiHub"
                        </a>
                    </li>
                </ul>
                <ul class="header__ulBtns ul--header">
                    <li>
                        <a href="acessar.html">
                            <button class="header_btnSignIn btns--header header--box--btns"
                                type="button">Acessar</button>
                        </a>
                    </li>
                    <li>
                        <a href="cadastrar.html">
                            <button class="header_btnSignUp btns--header header--box--btns"
                                type="button">Cadastrar</button>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <article class="bgMessage">
        <div class="bgMessage__bgMandala"></div>

        <div class="bgMessage__container">
            <p class="bgMessage__title">Seja Bem vindo(a). <u>Cadastre-se no ColossiHub!</u></p>
            <br>
            <p class="bgMessage__subTitle" id="p_fraseHTML"></p>
        </div>
    </article>

    <main>
        <section class="sectionSignIn">
            <div class="sectionSignIn__title"><!-- Título sessão-->
                <div class="sectionSignIn__leftMandala">
                    <img src="./assets/img/mandala-left-titles.png" alt="">
                </div>
                <span class="sectionSignIn__span">CADASTRAR</span>
                <div class="sectionSignIn__rightMandala">
                    <img src="./assets/img/mandala-right-titles.png" alt="">
                </div>
            </div>
            <div class="sectionSignIn__formContainer">
                <div class="sectionSignIn__nameContainer container--input--basis">
                    <span class="sectionSignIn__nameSpan">Nome de usuário:</span>
                    <input type="text" class="sectionSignIn__nameInput input--basis"
                        placeholder="Digite seu nome (fícticio)..." id="input_nome">
                </div>
                <div class="sectionSignIn__emailContainer container--input--basis">
                    <span class="sectionSignIn__emailSpan">Endereço de e-mail:</span>
                    <input type="email" class="sectionSignIn__emailInput input--basis" placeholder="Digite seu email..."
                        id="input_email">
                </div>
                <div class="sectionSignIn__passwordsContainer container--input--basis">
                    <span class="sectionSignIn__passwordsSpan">Senha:</span>
                    <div class="sectionSignIn__inputPasswordsContainer">
                        <input type="password" class="sectionSignIn__passwordsInput input--basis" id="input_senha"
                            placeholder="Digite sua senha...">
                        <div class="sectionSignIn__ContainerPasswordsBtn">
                            <button onclick="MostraEscondeSenha()" class="sectionSignIn__PasswordsBtn" id="btn_senha">
                                <i class="fa-regular fa-eye fa-xl" style="color: var(--very-light-gray);"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="sectionSignIn__passwordsContainer container--input--basis">
                    <span class="sectionSignIn__passwordsSpan">Confirmar Senha:</span>
                    <div class="sectionSignIn__inputPasswordsContainer">
                        <input type="password" class="sectionSignIn__passwordsInput input--basis"
                            id="input_confirmar_senha" placeholder="Digite sua senha novamente...">
                        <div class="sectionSignIn__ContainerPasswordsBtn">
                            <button onclick="MostraEscondeConfirmaSenha()" class="sectionSignIn__PasswordsBtn"
                                id="btn_confirmar_senha">
                                <i class="fa-regular fa-eye fa-xl" style="color: var(--very-light-gray);"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="sectionSignIn__linkBtnsContainer">
                <div id="div_erros_login"></div>
                <div id="div_aguardar" class="sectionSignIn__loadingDiv">
                  <img src="./assets/img/loading.gif" id="loading-gif">
                </div>
                <button class="sectionSignIn__btnSignIn btn--basis" onclick="Cadastrar()">CADASTRAR CONTA</button>
                <div class="sectionSignIn__orContainer">
                    <div class="sectionSignIn__leftLineOr"></div>
                    <span class="sectionSignIn__spanOr">OU</span>
                    <div class="sectionSignIn__rightLineOr"></div>
                </div>
                <span href="" class="sectionSignIn__linkYesAccount">Já tem uma conta?
                    <a href="./acessar.html" class="sectionSignIn__sublinkYesAccount">Entrar na Conta</a></span>
                <!-- <div class="btn--basis">
                    <div id="buttonDiv"></div>
                </div> -->
            </div>
        </section>
    </main>
    <footer>
        <article class="bgFooter"></article>
    </footer>
</body>

</html>
<script>

    function Cadastrar() {
        div_erros_login.innerHTML = ''
        aguardar()
    

        //Recupere o valor da nova input pelo nome do id
        // Agora vá para o método fetch logo abaixo
        var nomeVar = input_nome.value;
        var emailVar = input_email.value;
        var senhaVar = input_senha.value;
        var confirmacaoSenhaVar = input_confirmar_senha.value;

        if (nomeVar == "" || emailVar == "" || senhaVar == "" || confirmacaoSenhaVar == "") {
            finalizarAguardar("Há álgum campo vazio.");
            return false;

        } else if (emailVar.indexOf('@') == -1 || emailVar.indexOf('.com') == -1 ) {
            finalizarAguardar("O email informado não é válido.")
            return false;

        } else if (senhaVar != confirmacaoSenhaVar) {
            finalizarAguardar("A senhas informadas são diferentes")
            return false;

        } else if (nomeVar.length <= 3) {
            finalizarAguardar("O nome informado é muito curto.");
            return false;

        } else {

            // Enviando o valor da nova input
            fetch("/usuarios/cadastrar", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    // crie um atributo que recebe o valor recuperado aqui
                    // Agora vá para o arquivo routes/usuario.js
                    nomeServer: nomeVar,
                    emailServer: emailVar,
                    senhaServer: senhaVar,

                }),
            })
                .then(function (resposta) {
                    console.log("resposta: ", resposta);

                    if (resposta.ok) {

                        finalizarAguardar("Cadastro realizado com sucesso! Redirecionando para tela de acesso");

                        setTimeout(() => {
                            window.location = "./acessar.html";
                        }, "2000");

                        finalizarAguardar();


                    } else {
                        throw "Houve um erro ao tentar realizar o cadastro!";
                    }
                })
                .catch(function (resposta) {
                    console.log(`#ERRO: ${resposta}`);
                    finalizarAguardar();
                });
        }

        return false;
    }

    function MostraEscondeSenha() {
        var input = input_senha
        var btn = btn_senha

        if (input.type == "password") {
            input.type = 'text'
            btn.innerHTML = '<i class="fa-regular fa-eye-slash fa-xl" style="color: var(--very-light-gray);"></i>'
        } else {
            input.type = 'password'
            btn.innerHTML = '<i class="fa-regular fa-eye fa-xl" style="color: var(--very-light-gray);"></i>'

        }
    }

    function MostraEscondeConfirmaSenha() {
        var input = input_confirmar_senha
        var btn = btn_confirmar_senha

        if (input.type == "password") {
            input.type = 'text'
            btn.innerHTML = '<i class="fa-regular fa-eye-slash fa-xl" style="color: var(--very-light-gray);"></i>'
        } else {
            input.type = 'password'
            btn.innerHTML = '<i class="fa-regular fa-eye fa-xl" style="color: var(--very-light-gray);"></i>'

        }
    }

    function MudaFrase() {
        const frases = [

            "Registre-se e torne-se parte da saga dos colossos.",
            "Crie sua conta e inicie sua jornada lendária.",
            "O cadastro é o primeiro passo para a grande aventura.",
            "Entre para a comunidade dos corajosos caçadores de titãs.",
            "Cada cadastro é uma promessa de coragem e destemor.",
            "Faça parte do reino dos colossos, registre-se agora.",
            "Seu nome será ecoado nas terras proibidas. Cadastre-se.",
            "A inscrição é a chave para desbloquear o caminho dos heróis.",
            "O herói começa sua jornada com um simples cadastro.",
            "Junte-se à resistência. Registre-se e lute contra as sombras.",
            "A inscrição é o portal para a redenção nas terras esquecidas.",
            "Sua lenda começa a ser escrita com um simples cadastro.",
            "Crie sua conta e faça história nos confins proibidos.",
            "O cadastro é a porta de entrada para a bravura sem limites.",
            "Seja parte do épico. Registre-se e faça a diferença.",
            "A terra dos colossos aguarda seu nome. Cadastre-se agora.",
            "Cada novo membro fortalece a resistência contra as trevas.",
            "Registre-se para desafiar os gigantes e escrever sua saga.",
            "Faça sua inscrição e torne-se uma lenda na Terra Proibida.",
            "A aventura começa com seu cadastro. Torne-se parte da história."

        ]
        var indiceAleatorio = Math.floor(Math.random() * frases.length)
        const fraseHTML = document.getElementById('p_fraseHTML')
        fraseHTML.innerHTML = `"${frases[indiceAleatorio]}"`



    }

    document.addEventListener('DOMContentLoaded', function () {
        MudaFrase();
    });

    // function handleCredentialResponse(response) {
    //     const data = jwt_decode(response.credential)
    //     console.log(data)

    // }

    // window.onload = function () {
    //     google.accounts.id.initialize({
    //         client_id: "299396619158-2ooksliug4pr429q4jmh47pe12eashvi.apps.googleusercontent.com",
    //         callback: handleCredentialResponse
    //     });
    //     google.accounts.id.renderButton(
    //         document.getElementById("buttonDiv"),
    //         {
    //             type: "standard",
    //             shape: "rectangular",
    //             theme: "filled_black",
    //             text: "signup_with",
    //             size: "large",
    //             logo_alignment: "left",
    //             width: "400px"

    //         }  // customization attributes
    //     );
    //     google.accounts.id.prompt(); // also display the One Tap dialog
    // }









</script>